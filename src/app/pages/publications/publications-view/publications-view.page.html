<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button color="primary"></ion-menu-button>
    </ion-buttons>
    <ion-title>Publication</ion-title>
  </ion-toolbar>
  </ion-header>


  <ion-content *ngIf="utilisateur && publication">
    <ion-card>
      <ion-item lines="none">
        <ion-avatar slot="start">
          <img [src]="publication.utilisateur ? publication.utilisateur.photoURL :'../../../assets/img/user.png'" />
        </ion-avatar>
        <ion-label>
          <h2>
            <b>
              {{publication.utilisateur ? publication.utilisateur.displayName : 'Aucun utilisateur'}}
            </b>
          </h2>
          <p>
            Le {{publication.date | date: 'dd-MM-yyyy'}} à {{publication.date | date: 'HH:mm'}}
          </p>
        </ion-label>
      </ion-item>
      <ion-item lines="none" class="tweet">
        <ion-label text-wrap (click)="ouvrirPublication()">
          {{publication.texte}}
        </ion-label>
      </ion-item>
      <img  *ngIf="publication.cover" class="tweet-img" [src]="publication.cover" />
      <div style="margin-top: 10px; font-size: 1.2em;">
        <ion-button color="danger" *ngIf="jaiLike" fill="clear" (click)="unlike()">
          <ion-icon slot="start" name="heart"></ion-icon>
          {{publication.likes}}
        </ion-button>
        <ion-button *ngIf="!jaiLike" fill="clear" (click)="like()">
          <ion-icon slot="start" name="heart-outline"></ion-icon>
          {{publication.likes}}
        </ion-button>
        <ion-button fill="clear" (click)="onClick()">
          <ion-icon slot="start" name="chatbubbles-outline"></ion-icon> 0
        </ion-button>
        <ion-button fill="clear" (click)="onClick()">
          <ion-icon slot="start" name="heart-empty"></ion-icon> 0
        </ion-button>
      </div>
    </ion-card>

    <ion-item>
      <ion-avatar slot="start">
        <img class="image-muanza"
          [src]="utilisateur.photoURL ? utilisateur.photoURL: '../../../assets/img/user.png'">
      </ion-avatar>
      <ion-textarea [(ngModel)]="texte" placeholder="Ecrire votre réponse ici..."></ion-textarea>
      <h2 (click)="envoyer()">
        <ion-icon name="paper-plane"></ion-icon>
      </h2>
    </ion-item>
    <ion-item *ngFor="let commentaire of commentaires">
      <ion-avatar slot="start">
        <img class="image-muanza"
          [src]="commentaire.utilisateur.photoURL ? commentaire.utilisateur.photoURL: '../../../assets/img/user.png'">
      </ion-avatar>
      <ion-label>
        <div>
          {{commentaire.texte}}
        </div>
        <small>
          {{commentaire.date | date: 'dd-MM-yyyy'}} à 
          {{commentaire.date | date: 'HH:mm'}}
        </small>
      </ion-label>
    </ion-item>
  </ion-content>