<ion-header *ngIf="profil">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button color="primary"></ion-back-button>
      <div style="padding: 8px; padding-right: 0px;" slot="end">
        <img style="height: 40px; width: 40px; border-radius: 50%;"
          [src]="profil.utilisateur.photoURL ? profil.utilisateur.photoURL: '../../../assets/img/user.png'" alt="" />
      </div>
    </ion-buttons>
    <ion-title>
      <div>
        {{ profil.utilisateur.displayName ? profil.utilisateur.displayName:'inconnu'}}
        </div>
      <div class="status">En ligne</div>
    </ion-title>

    <ion-buttons slot="end">
      <ion-button color="primary">
        <ion-icon slot="icon-only" name="ellipsis-vertical-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content>
  <ion-grid *ngIf="messages">
    <ng-container *ngFor="let messagesDate of messageGroupe(messages)">
      <div class="division">
        <div class="ligne"></div>
        <div class="texte">
          <span>
            {{messagesDate.date}}
          </span>
        </div>
      </div>
      <div *ngFor="let message of messagesDate.messages">
        <div *ngIf="message.emetteurID != senderId" class="message other-message">
          <span>
            {{ message.texte }}
            <small *ngIf="message.date">
              {{ resolveDate(message.date) | date: 'HH:mm'}}
            </small>
          </span>
        </div>
        <div (click)="presentActionSheet(message)" offset="3" size="9" *ngIf="message.emetteurID === senderId"
          class="message my-message">
          <span>
            {{ message.texte }}
            <small *ngIf="message.date">
              {{ resolveDate(message.date) | date: 'HH:mm'}}
            </small>
          </span>
        </div>
      </div>
    </ng-container>
  </ion-grid>
</ion-content>

<ion-footer>
  <ion-toolbar color="light">
    <ion-row align-items-center no-padding>
      <ion-col size="10">
        <ion-textarea class="msg-input" rows="1" autosize maxRows="3" [(ngModel)]="messageText"
          (keyup.enter)="envoyerMessage()">
        </ion-textarea>
      </ion-col>
      <ion-col size="2">
        <div style="margin-top: 12px;">
          <ion-button [disabled]="!messageText" expand="block" fill="clear" color="primary" class="msg-btn"
            (click)="envoyerMessage()">
            <ion-icon name="send" slot="icon-only"></ion-icon>
          </ion-button>
        </div>
      </ion-col>
    </ion-row>
  </ion-toolbar>
</ion-footer>