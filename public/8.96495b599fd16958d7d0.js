(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"22TP":function(n,l,t){"use strict";t.r(l);var u=t("CcnG"),i=function(){return function(){}}(),e=t("pMnS"),o=t("MKJQ"),r=t("jy/b"),a=t("Ip0R"),s=t("gIcY"),c=t("iqUP"),b=t("izgN"),p=t("qfBg"),f=function(){function n(n,l,t){this.userService=n,this.router=l,this.auth=t,this.profils=new Array,this.profilsResultats=new Array,this.amis=new Array,this.amis2=new Array,this.propositions=new Array,this.chats=new Array,this.saisie=""}return n.prototype.ngOnInit=function(){var n=this;this.utilisateurSubscription=this.auth.utilisateurSubject.subscribe((function(l){n.utilisateur=l,n.userService.getProfil(n.utilisateur).then((function(l){n.monProfil=l})),l?(n.getChats(),n.userService.getProfils().then((function(l){n.profilsResultats=l.filter((function(l){return l.utilisateur.uid!==n.utilisateur.uid}))}))):n.router.navigate(["connexion"])})),this.auth.emettre()},n.prototype.getChats=function(){var n=this;this.chats=[],console.log("Get chats"),console.log(this.utilisateur.uid),c.firestore().collection("chats").where("chatersID","array-contains",this.utilisateur.uid).get().then((function(l){l.forEach((function(l){var t=l.data();n.chats.push(t)}))}))},n.prototype.goToChat=function(n){var l=n.profil1,t=n.profil2;l.utilisateur.uid===this.utilisateur.uid?(localStorage.setItem("interlocuteurEkang",JSON.stringify(t)),this.router.navigate(["messages","chat",t.utilisateur.uid])):(localStorage.setItem("interlocuteurEkang",JSON.stringify(l)),this.router.navigate(["messages","chat",l.utilisateur.uid]))},n.prototype.getDate=function(n){return new Date(n.dernierMessageDate)},n}(),h=t("ZYCi"),g=u.ob({encapsulation:0,styles:[[".user-item[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.user-item[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1}.user-item[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}.user-item[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{-webkit-box-flex:2;flex:2}.user-item[_ngcontent-%COMP%]   .user-presence[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1}.user-item[_ngcontent-%COMP%]   .user-online[_ngcontent-%COMP%]{color:#32eb32}ion-avatar[_ngcontent-%COMP%]{height:45px;width:45px}h3[_ngcontent-%COMP%]{font-weight:700;font-size:15px}.flex_box[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}ion-note[_ngcontent-%COMP%]{font-size:13px}.text-icon[_ngcontent-%COMP%]{font-size:22px;margin-bottom:-6px}p[_ngcontent-%COMP%]{color:grey}"]],data:{}});function m(n){return u.Lb(0,[(n()(),u.qb(0,0,null,null,2,"ion-avatar",[["slot","start"]],null,null,null,o.U,o.b)),u.pb(1,49152,null,0,r.f,[u.h,u.k,u.x],null,null),(n()(),u.qb(2,0,null,0,0,"img",[["alt",""]],[[8,"src",4]],null,null,null,null))],null,(function(n,l){n(l,2,0,l.parent.context.$implicit.profil2.utilisateur.photoURL?l.parent.context.$implicit.profil2.utilisateur.photoURL:"../../../assets/img/user.png")}))}function x(n){return u.Lb(0,[(n()(),u.qb(0,0,null,null,2,"ion-avatar",[["slot","start"]],null,null,null,o.U,o.b)),u.pb(1,49152,null,0,r.f,[u.h,u.k,u.x],null,null),(n()(),u.qb(2,0,null,0,0,"img",[["alt",""]],[[8,"src",4]],null,null,null,null))],null,(function(n,l){n(l,2,0,l.parent.context.$implicit.profil1.utilisateur.photoURL?l.parent.context.$implicit.profil1.utilisateur.photoURL:"../../../assets/img/user.png")}))}function d(n){return u.Lb(0,[(n()(),u.qb(0,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),u.Jb(1,null,[" "," "]))],null,(function(n,l){n(l,1,0,l.parent.context.$implicit.profil1.utilisateur.displayName?l.parent.context.$implicit.profil1.utilisateur.displayName:"inconnu")}))}function k(n){return u.Lb(0,[(n()(),u.qb(0,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),u.Jb(1,null,[" "," "]))],null,(function(n,l){n(l,1,0,l.parent.context.$implicit.profil2.utilisateur.displayName?l.parent.context.$implicit.profil2.utilisateur.displayName:"inconnu")}))}function y(n){return u.Lb(0,[(n()(),u.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),u.Jb(1,null,[" "," "]))],null,(function(n,l){n(l,1,0,l.parent.context.$implicit.dernierMessages[0].texte)}))}function C(n){return u.Lb(0,[(n()(),u.qb(0,0,null,null,18,"ion-item",[],null,[[null,"click"]],(function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.goToChat(n.context.$implicit)&&u),u}),o.nb,o.u)),u.pb(1,49152,null,0,r.H,[u.h,u.k,u.x],null,null),(n()(),u.fb(16777216,null,0,1,null,m)),u.pb(3,16384,null,0,a.k,[u.N,u.J],{ngIf:[0,"ngIf"]},null),(n()(),u.fb(16777216,null,0,1,null,x)),u.pb(5,16384,null,0,a.k,[u.N,u.J],{ngIf:[0,"ngIf"]},null),(n()(),u.qb(6,0,null,0,8,"ion-label",[],null,null,null,o.ob,o.v)),u.pb(7,49152,null,0,r.N,[u.h,u.k,u.x],null,null),(n()(),u.fb(16777216,null,0,1,null,d)),u.pb(9,16384,null,0,a.k,[u.N,u.J],{ngIf:[0,"ngIf"]},null),(n()(),u.fb(16777216,null,0,1,null,k)),u.pb(11,16384,null,0,a.k,[u.N,u.J],{ngIf:[0,"ngIf"]},null),(n()(),u.qb(12,0,null,0,2,"p",[],null,null,null,null,null)),(n()(),u.fb(16777216,null,null,1,null,y)),u.pb(14,16384,null,0,a.k,[u.N,u.J],{ngIf:[0,"ngIf"]},null),(n()(),u.qb(15,0,null,0,3,"ion-note",[["slot","end"]],null,null,null,o.ub,o.B)),u.pb(16,49152,null,0,r.V,[u.h,u.k,u.x],null,null),(n()(),u.Jb(17,0,[" "," "])),u.Fb(18,2)],(function(n,l){var t=l.component;n(l,3,0,l.context.$implicit.profil1.utilisateur.uid===t.utilisateur.uid),n(l,5,0,l.context.$implicit.profil2.utilisateur.uid===t.utilisateur.uid),n(l,9,0,l.context.$implicit.profil2.utilisateur.uid===t.utilisateur.uid),n(l,11,0,l.context.$implicit.profil1.utilisateur.uid===t.utilisateur.uid),n(l,14,0,l.context.$implicit.dernierMessages[0])}),(function(n,l){var t=l.component,i=u.Kb(l,17,0,n(l,18,0,u.Bb(l.parent,0),t.getDate(l.context.$implicit),"HH:mm"));n(l,17,0,i)}))}function M(n){return u.Lb(0,[u.Db(0,a.d,[u.s]),(n()(),u.qb(1,0,null,null,16,"ion-header",[],null,null,null,o.kb,o.r)),u.pb(2,49152,null,0,r.B,[u.h,u.k,u.x],null,null),(n()(),u.qb(3,0,null,0,8,"ion-toolbar",[],null,null,null,o.Lb,o.S)),u.pb(4,49152,null,0,r.zb,[u.h,u.k,u.x],null,null),(n()(),u.qb(5,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,o.Y,o.f)),u.pb(6,49152,null,0,r.l,[u.h,u.k,u.x],null,null),(n()(),u.qb(7,0,null,0,1,"ion-menu-button",[["color","primary"]],null,null,null,o.rb,o.z)),u.pb(8,49152,null,0,r.R,[u.h,u.k,u.x],{color:[0,"color"]},null),(n()(),u.qb(9,0,null,0,2,"ion-title",[["size","large"]],null,null,null,o.Kb,o.R)),u.pb(10,49152,null,0,r.xb,[u.h,u.k,u.x],{size:[0,"size"]},null),(n()(),u.Jb(-1,0,["Messagerie"])),(n()(),u.qb(12,0,null,0,5,"ion-toolbar",[],null,null,null,o.Lb,o.S)),u.pb(13,49152,null,0,r.zb,[u.h,u.k,u.x],null,null),(n()(),u.qb(14,0,null,0,3,"ion-searchbar",[["placeholder","Rechercher..."]],null,[[null,"ionBlur"],[null,"ionChange"]],(function(n,l,t){var i=!0;return"ionBlur"===l&&(i=!1!==u.Bb(n,17)._handleBlurEvent(t.target)&&i),"ionChange"===l&&(i=!1!==u.Bb(n,17)._handleInputEvent(t.target)&&i),i}),o.wb,o.D)),u.Gb(5120,null,s.h,(function(n){return[n]}),[r.Mb]),u.pb(16,49152,null,0,r.hb,[u.h,u.k,u.x],{placeholder:[0,"placeholder"]},null),u.pb(17,16384,null,0,r.Mb,[u.k],null,null),(n()(),u.qb(18,0,null,null,3,"ion-content",[],null,null,null,o.fb,o.m)),u.pb(19,49152,null,0,r.u,[u.h,u.k,u.x],null,null),(n()(),u.fb(16777216,null,0,1,null,C)),u.pb(21,278528,null,0,a.j,[u.N,u.J,u.q],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){var t=l.component;n(l,8,0,"primary"),n(l,10,0,"large"),n(l,16,0,"Rechercher..."),n(l,21,0,t.chats)}),null)}function v(n){return u.Lb(0,[(n()(),u.qb(0,0,null,null,1,"app-messages",[],null,null,null,M,g)),u.pb(1,114688,null,0,f,[p.a,h.m,b.a],null,null)],(function(n,l){n(l,1,0)}),null)}var P=u.mb("app-messages",f,v,{},{},[]),q=function(){return t.e(7).then(t.bind(null,"xZYA")).then((function(n){return n.ChatPageModuleNgFactory}))},w=function(){return t.e(7).then(t.bind(null,"xZYA")).then((function(n){return n.ChatPageModuleNgFactory}))},z=function(){return function(){}}();t.d(l,"MessagesPageModuleNgFactory",(function(){return O}));var O=u.nb(i,[],(function(n){return u.yb([u.zb(512,u.j,u.Y,[[8,[e.a,P]],[3,u.j],u.v]),u.zb(4608,a.m,a.l,[u.s,[2,a.z]]),u.zb(4608,s.p,s.p,[]),u.zb(4608,r.c,r.c,[u.x,u.g]),u.zb(4608,r.Fb,r.Fb,[r.c,u.j,u.p]),u.zb(4608,r.Jb,r.Jb,[r.c,u.j,u.p]),u.zb(1073742336,a.b,a.b,[]),u.zb(1073742336,s.o,s.o,[]),u.zb(1073742336,s.g,s.g,[]),u.zb(1073742336,r.Bb,r.Bb,[]),u.zb(1073742336,h.q,h.q,[[2,h.v],[2,h.m]]),u.zb(1073742336,z,z,[]),u.zb(1073742336,i,i,[]),u.zb(1024,h.k,(function(){return[[{path:"",component:f},{path:"chat",loadChildren:q},{path:"chat/:id",loadChildren:w}]]}),[])])}))}}]);