(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{HM5V:function(n,l,t){"use strict";t.d(l,"a",(function(){return i}));var i=function(){function n(n,l){this.date=new Date,this.id=this.generateUID(),this.profil=n,this.type=l}return n.prototype.generateUID=function(){return(new Date).toISOString().split("T")[0]+Math.ceil(1e6*Math.random())},n}()},"aG7/":function(n,l,t){"use strict";t.d(l,"a",(function(){return a}));var i=t("mrSG"),e=(t("aTBO"),t("wzbf"),t("iqUP"),t("hYDt")),u=t("HM5V"),o=(t("OC8m"),t("qfBg"),t("h0Qz")),r=t("Vwl2"),a=function(){function n(n,l,t,i,e,u,o){this.router=n,this.pubService=l,this.userService=t,this.notifService=i,this.modalController=e,this.actionSheetController=u,this.alertController=o,this.isPlay=!1,this.jaiLike=!1,this.isShown=!0}return n.prototype.ngOnInit=function(){var n=this;this.publication&&this.utilisateur&&(this.auteur=!(!this.publication.profil||!this.publication.profil.utilisateur||this.publication.profil.utilisateur.uid!=this.utilisateur.uid),this.aiJeLike(),this.publication&&this.publication.dernierCommentaire&&(this.userService.getProfilByID(this.publication.utilisateur.uid).then((function(l){n.publication.profil=l,n.publication.utilisateur=l.utilisateur})),this.commentaire=this.publication.dernierCommentaire,this.userService.getProfilByID(this.commentaire.utilisateur.uid).then((function(l){n.commentaire.utilisateur=l.utilisateur}))))},n.prototype.ngOnChanges=function(n){var l=this;this.publication&&this.utilisateur&&(this.aiJeLike(),this.publication.profil&&this.publication.profil.utilisateur&&this.userService.getProfilByID(this.publication.profil.utilisateur.uid).then((function(n){l.publication.profil=n,l.publication.utilisateur=n.utilisateur}))),this.publication&&this.publication.dernierCommentaire&&(this.commentaire=this.publication.dernierCommentaire)},n.prototype.getLibelleDate=function(n){var l=new Date(n),t=((new Date).getTime()-l.getTime())/1e3/60,i=t/60,e=i/24;return e>1?Math.floor(e)+"j":i>1?"il y a "+Math.floor(i)+"h":t>1?"il y a "+Math.floor(t)+" min":"A l'instant"},n.prototype.voirAmi=function(){this.router.navigate(["amis","amis-view",this.publication.utilisateur.uid])},n.prototype.urlify=function(n){return this.getHashTag(n).replace(/(https?:\/\/[^\s]+)/g,(function(n){return'<a target="_blank" href="'+n+'">'+n+"</a>"}))},n.prototype.checkImage=function(n){return n},n.prototype.getNameFromEmailInIdentification=function(n){var l;return this.publication&&this.publication.identifications&&this.publication.identifications.forEach((function(t){t.utilisateur.email===n&&(l=t)})),l},n.prototype.getHashTag=function(n){var l=this,t="";return n.split(" ").forEach((function(n){if(n[0]&&"#"===n[0])t=t+'<b class="vert">'+n+"</b> ";else if(n[0]&&"@"===n[0]){if(n[1]&&"@"===n[1]){var i=n.split("@@")[1],e=l.getNameFromEmailInIdentification(i);t=t+"<b "+e.utilisateur.uid+'" class="vert">'+e.utilisateur.displayName+"</b> "}}else t=t+n+" "})),t},n.prototype.voir=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){switch(n.label){case 0:return console.log(this.publication.likeurs),this.publication.likeurs.length?[4,this.modalController.create({component:o.a,componentProps:{likeurs:this.publication.likeurs}})]:[3,3];case 1:return[4,n.sent().present()];case 2:return[2,n.sent()];case 3:return[2]}}))}))},n.prototype.aiJeLike=function(){var n=this;this.publication.likeurs&&this.publication.likeurs.forEach((function(l){l===n.utilisateur.uid&&(n.jaiLike=!0)}))},n.prototype.like=function(){var n=this;this.pubService.like(this.utilisateur,this.publication).then((function(l){n.publication=l,n.jaiLike=!0,n.createNotificationLike()}))},n.prototype.unlike=function(){var n=this;this.publication.likeurs&&(this.publication.likeurs=this.publication.likeurs.filter((function(l){return l!==n.utilisateur.uid}))),this.jaiLike=!1,this.pubService.unlike(this.utilisateur,this.publication).then((function(l){n.publication=l,n.jaiLike=!1}))},n.prototype.ouvrirPublication=function(){this.router.navigate(["publications","publications-view",this.publication.id])},n.prototype.createNotificationLike=function(){var n=new e.a(this.utilisateur),l=new u.a(n,"LIKE");l.publication=this.publication,this.notifService.createNotification(l).then((function(n){}))},n.prototype.toggleVideo=function(){this.videoplayer.nativeElement.play()},n.prototype.Delete=function(){var n=this;console.log(this.publication.profil.utilisateur.uid),console.log(this.utilisateur.uid),this.pubService.deletePublication(this.publication.id).then((function(l){console.log(l),n.isShown=!1}))},n.prototype.presentActionSheet=function(){return i.__awaiter(this,void 0,void 0,(function(){var n=this;return i.__generator(this,(function(l){switch(l.label){case 0:return[4,this.actionSheetController.create({header:"Ã´ssu",buttons:[{text:"Supprimer",role:"destructive",icon:"trash",handler:function(){n.presentAlertConfirm()}},{text:"Modifier",icon:"share",handler:function(){n.modifier()}},{text:"Cancel",icon:"close",role:"cancel",handler:function(){console.log("Cancel clicked")}}]})];case 1:return[4,l.sent().present()];case 2:return l.sent(),[2]}}))}))},n.prototype.presentAlertConfirm=function(){return i.__awaiter(this,void 0,void 0,(function(){var n=this;return i.__generator(this,(function(l){switch(l.label){case 0:return[4,this.alertController.create({header:"Warning!",message:"are you sure?",buttons:[{text:"NO",role:"cancel",cssClass:"secondary",handler:function(n){console.log("Confirm Cancel: blah")}},{text:"OK",handler:function(){n.Delete()}}]})];case 1:return[4,l.sent().present()];case 2:return l.sent(),[2]}}))}))},n.prototype.modifier=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){switch(n.label){case 0:return console.log(this.publication),[4,this.modalController.create({component:r.a,componentProps:{publication:this.publication}})];case 1:return[4,n.sent().present()];case 2:return[2,n.sent()]}}))}))},n}()},aTBO:function(n,l,t){"use strict";t.d(l,"a",(function(){return i}));var i=function(){function n(n,l){this.likeurs=new Array,this.commentaires=new Array,this.date=new Date,this.id=this.generateUID(),this.texte=n,this.utilisateur=l,this.likes=0,this.identifications=new Array}return n.prototype.generateUID=function(){return(new Date).toISOString().split("T")[0]+Math.ceil(1e6*Math.random())},n}()},uYoW:function(n,l,t){"use strict";var i=t("CcnG"),e=t("MKJQ"),u=t("jy/b"),o=t("Ip0R");t("aG7/"),t("ZYCi"),t("wzbf"),t("qfBg"),t("OC8m"),t.d(l,"a",(function(){return r})),t.d(l,"b",(function(){return v}));var r=i.ob({encapsulation:0,styles:[['@-webkit-keyframes apparition{0%{-webkit-transform:scaleY(0);transform:scaleY(0)}100%{-webkit-transform:scaleY(1);transform:scaleY(1)}}@keyframes apparition{0%{-webkit-transform:scaleY(0);transform:scaleY(0)}100%{-webkit-transform:scaleY(1);transform:scaleY(1)}}.tweet[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{line-height:1!important;font-size:15px;margin:6px 0!important;min-height:34px}.tweet[_ngcontent-%COMP%]{margin-top:-10px!important}.tweet-img[_ngcontent-%COMP%]{border-radius:10px;width:95%;margin-left:2.5%}.menu[_ngcontent-%COMP%]{position:absolute;z-index:2}a.vert[_ngcontent-%COMP%]{color:#0f9b0f}.muanza-card[_ngcontent-%COMP%]{-webkit-animation-name:apparition;animation-name:apparition;-webkit-animation-duration:.4s;animation-duration:.4s;border:1px solid #aba;background-color:#fefffe;padding:1vh 0 0;margin:1.5vh 1.5vw}.muanza-card.gauche-verte[_ngcontent-%COMP%]{border-left:3px solid #080}span[_ngcontent-%COMP%]{font-weight:700}ion-item[_ngcontent-%COMP%]{--background:rgba(var(--ion-color-primary-rgb), 0)}ion-item.commentaire[_ngcontent-%COMP%]{--background:rgba(var(--ion-color-primary-rgb), 0.1)}  b{color:#0f9b0f}.nbrLike[_ngcontent-%COMP%], .nbrcommentaire[_ngcontent-%COMP%]{height:5%;font-size:80%;color:#aaa}.lesBoutons[_ngcontent-%COMP%], .nbrcommentaireLike[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.ubuntu[_ngcontent-%COMP%]{font-family:Ubuntu}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:local("Ubuntu Regular"),local("Ubuntu-Regular"),url(https://fonts.gstatic.com/s/ubuntu/v14/4iCs6KVjbNBYlgoKcg72j00.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:local("Ubuntu Regular"),local("Ubuntu-Regular"),url(https://fonts.gstatic.com/s/ubuntu/v14/4iCs6KVjbNBYlgoKew72j00.woff2) format("woff2");unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:local("Ubuntu Regular"),local("Ubuntu-Regular"),url(https://fonts.gstatic.com/s/ubuntu/v14/4iCs6KVjbNBYlgoKcw72j00.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:local("Ubuntu Regular"),local("Ubuntu-Regular"),url(https://fonts.gstatic.com/s/ubuntu/v14/4iCs6KVjbNBYlgoKfA72j00.woff2) format("woff2");unicode-range:U+0370-03FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:local("Ubuntu Regular"),local("Ubuntu-Regular"),url(https://fonts.gstatic.com/s/ubuntu/v14/4iCs6KVjbNBYlgoKcQ72j00.woff2) format("woff2");unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:local("Ubuntu Regular"),local("Ubuntu-Regular"),url(https://fonts.gstatic.com/s/ubuntu/v14/4iCs6KVjbNBYlgoKfw72.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}']],data:{}});function a(n){return i.Lb(0,[(n()(),i.qb(0,0,null,null,2,"div",[["style","margin-top: -7px; color: #444;"]],null,null,null,null,null)),(n()(),i.qb(1,0,null,null,1,"small",[],null,null,null,null,null)),(n()(),i.Jb(2,null,[" ",", "," "]))],null,(function(n,l){var t=l.component;n(l,2,0,t.publication.profil?t.publication.profil.ville:"",t.publication.profil?t.publication.profil.pays:"")}))}function c(n){return i.Lb(0,[(n()(),i.qb(0,0,null,null,1,"ion-icon",[["color","primary"],["name","ellipsis-vertical-outline"],["slot","end"]],null,[[null,"click"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==n.component.presentActionSheet()&&i),i}),e.lb,e.s)),i.pb(1,49152,null,0,u.C,[i.h,i.k,i.x],{color:[0,"color"],name:[1,"name"]},null)],(function(n,l){n(l,1,0,"primary","ellipsis-vertical-outline")}),null)}function s(n){return i.Lb(0,[(n()(),i.qb(0,0,null,null,0,"img",[["class","imageRadius"],["style","width: 100%;"]],[[8,"src",4]],null,null,null,null))],null,(function(n,l){n(l,0,0,l.component.publication.cover)}))}function f(n){return i.Lb(0,[(n()(),i.qb(0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),i.fb(16777216,null,null,1,null,s)),i.pb(2,16384,null,0,o.k,[i.N,i.J],{ngIf:[0,"ngIf"]},null)],(function(n,l){n(l,2,0,l.component.publication.cover)}),null)}function p(n){return i.Lb(0,[(n()(),i.qb(0,0,null,null,3,"div",[["class","video"]],null,null,null,null,null)),(n()(),i.qb(1,0,[[1,0],["videoPlayer",1]],null,2,"video",[["controls",""],["height","200"],["id","video-style"],["width","100%"]],null,[[null,"click"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==n.component.toggleVideo()&&i),i}),null,null)),(n()(),i.qb(2,0,null,null,0,"source",[["type","video/mp4"]],[[8,"src",4]],null,null,null,null)),(n()(),i.Jb(-1,null,[" Browser not supported "]))],null,(function(n,l){n(l,2,0,l.component.publication.cover)}))}function b(n){return i.Lb(0,[(n()(),i.qb(0,0,null,null,5,"ion-button",[["color","danger"],["fill","clear"],["size","large"]],null,[[null,"click"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==n.component.unlike()&&i),i}),e.X,e.e)),i.pb(1,49152,null,0,u.k,[i.h,i.k,i.x],{color:[0,"color"],fill:[1,"fill"],size:[2,"size"]},null),(n()(),i.qb(2,0,null,0,1,"ion-icon",[["name","heart"],["slot","start"]],null,null,null,e.lb,e.s)),i.pb(3,49152,null,0,u.C,[i.h,i.k,i.x],{name:[0,"name"]},null),(n()(),i.qb(4,0,null,0,1,"span",[["style","margin-left: 10px;"]],null,null,null,null,null)),(n()(),i.Jb(5,null,[" "," "]))],(function(n,l){n(l,1,0,"danger","clear","large"),n(l,3,0,"heart")}),(function(n,l){n(l,5,0,l.component.publication.likes)}))}function h(n){return i.Lb(0,[(n()(),i.qb(0,0,null,null,5,"ion-button",[["color","medium"],["fill","clear"],["size","large"]],null,[[null,"click"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==n.component.like()&&i),i}),e.X,e.e)),i.pb(1,49152,null,0,u.k,[i.h,i.k,i.x],{color:[0,"color"],fill:[1,"fill"],size:[2,"size"]},null),(n()(),i.qb(2,0,null,0,1,"ion-icon",[["name","heart-outline"],["slot","start"]],null,null,null,e.lb,e.s)),i.pb(3,49152,null,0,u.C,[i.h,i.k,i.x],{name:[0,"name"]},null),(n()(),i.qb(4,0,null,0,1,"span",[["style","margin-left: 10px;"]],null,null,null,null,null)),(n()(),i.Jb(5,null,[" "," "]))],(function(n,l){n(l,1,0,"medium","clear","large"),n(l,3,0,"heart-outline")}),(function(n,l){n(l,5,0,l.component.publication.likes)}))}function m(n){return i.Lb(0,[(n()(),i.qb(0,0,null,null,0,"div",[["style","background-color: #eee; height: 1px;"]],null,null,null,null,null))],null,null)}function d(n){return i.Lb(0,[(n()(),i.qb(0,0,null,null,14,"ion-item",[["class","commentaire"],["lines","none"]],null,[[null,"click"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==n.component.ouvrirPublication()&&i),i}),e.nb,e.u)),i.pb(1,49152,null,0,u.H,[i.h,i.k,i.x],{lines:[0,"lines"]},null),(n()(),i.qb(2,0,null,0,2,"ion-avatar",[["slot","start"]],null,null,null,e.U,e.b)),i.pb(3,49152,null,0,u.f,[i.h,i.k,i.x],null,null),(n()(),i.qb(4,0,null,0,0,"img",[["class","image-muanza"],["style","padding: 7px"]],[[8,"src",4]],null,null,null,null)),(n()(),i.qb(5,0,null,0,6,"ion-label",[["text-wrap",""]],null,null,null,e.ob,e.v)),i.pb(6,49152,null,0,u.N,[i.h,i.k,i.x],null,null),(n()(),i.qb(7,0,null,0,1,"span",[],null,null,null,null,null)),(n()(),i.Jb(8,null,[" "," "])),(n()(),i.qb(9,0,null,0,2,"div",[["style","line-height: 1; color: #444; margin-top: -3px;"]],null,null,null,null,null)),(n()(),i.qb(10,0,null,null,1,"small",[],null,null,null,null,null)),(n()(),i.Jb(11,null,[" "," "])),(n()(),i.qb(12,0,null,0,2,"div",[["slot","end"]],null,null,null,null,null)),(n()(),i.qb(13,0,null,null,1,"small",[["style","margin-top: -5px; vertical-align: top;"]],null,null,null,null,null)),(n()(),i.Jb(14,null,[" "," "]))],(function(n,l){n(l,1,0,"none")}),(function(n,l){var t=l.component;n(l,4,0,t.commentaire.utilisateur.photoURL?t.commentaire.utilisateur.photoURL:"../../../assets/img/user.png"),n(l,8,0,t.commentaire.utilisateur?t.commentaire.utilisateur.displayName:"Aucun utilisateur"),n(l,11,0,t.commentaire.texte),n(l,14,0,t.getLibelleDate(t.commentaire.date))}))}function g(n){return i.Lb(0,[(n()(),i.qb(0,0,null,null,41,"div",[["class","muanza-card"]],null,null,null,null,null)),(n()(),i.qb(1,0,null,null,14,"ion-item",[["lines","none"]],null,null,null,e.nb,e.u)),i.pb(2,49152,null,0,u.H,[i.h,i.k,i.x],{lines:[0,"lines"]},null),(n()(),i.qb(3,0,null,0,2,"ion-avatar",[["slot","start"]],null,null,null,e.U,e.b)),i.pb(4,49152,null,0,u.f,[i.h,i.k,i.x],null,null),(n()(),i.qb(5,0,null,0,0,"img",[["style","border: 2px solid #0f9b0f; padding: 2px"]],[[8,"src",4]],null,null,null,null)),(n()(),i.qb(6,0,null,0,4,"div",[],null,null,null,null,null)),(n()(),i.qb(7,0,null,null,1,"span",[],null,[[null,"click"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==n.component.voirAmi()&&i),i}),null,null)),(n()(),i.Jb(8,null,[" "," "])),(n()(),i.fb(16777216,null,null,1,null,a)),i.pb(10,16384,null,0,o.k,[i.N,i.J],{ngIf:[0,"ngIf"]},null),(n()(),i.qb(11,0,null,0,2,"p",[["slot","end"],["style","margin-top: -3px;"]],null,null,null,null,null)),(n()(),i.qb(12,0,null,null,1,"small",[],null,null,null,null,null)),(n()(),i.Jb(13,null,[" "," "])),(n()(),i.fb(16777216,null,0,1,null,c)),i.pb(15,16384,null,0,o.k,[i.N,i.J],{ngIf:[0,"ngIf"]},null),(n()(),i.qb(16,0,null,null,1,"div",[["class","ubuntu"],["style","margin: 15px; font-size: 1.2em; font-weight: 50; margin-top: 10px; line-height: 1.15;"]],null,[[null,"click"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==n.component.ouvrirPublication()&&i),i}),null,null)),(n()(),i.qb(17,0,null,null,0,"small",[["style","color: #222;"]],[[8,"innerHTML",1]],null,null,null,null)),(n()(),i.fb(16777216,null,null,1,null,f)),i.pb(19,16384,null,0,o.k,[i.N,i.J],{ngIf:[0,"ngIf"]},null),(n()(),i.fb(16777216,null,null,1,null,p)),i.pb(21,16384,null,0,o.k,[i.N,i.J],{ngIf:[0,"ngIf"]},null),(n()(),i.qb(22,0,null,null,15,"div",[["style","margin-top: 0px; font-size: 1.2em; border-top: 1px solid #eee;"]],null,null,null,null,null)),(n()(),i.qb(23,0,null,null,14,"div",[["class","lesBoutons"]],null,null,null,null,null)),(n()(),i.fb(16777216,null,null,1,null,b)),i.pb(25,16384,null,0,o.k,[i.N,i.J],{ngIf:[0,"ngIf"]},null),(n()(),i.fb(16777216,null,null,1,null,h)),i.pb(27,16384,null,0,o.k,[i.N,i.J],{ngIf:[0,"ngIf"]},null),(n()(),i.qb(28,0,null,null,5,"ion-button",[["color","medium"],["fill","clear"],["size","large"]],null,[[null,"click"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==n.component.ouvrirPublication()&&i),i}),e.X,e.e)),i.pb(29,49152,null,0,u.k,[i.h,i.k,i.x],{color:[0,"color"],fill:[1,"fill"],size:[2,"size"]},null),(n()(),i.qb(30,0,null,0,1,"ion-icon",[["name","chatbox-ellipses-outline"]],null,null,null,e.lb,e.s)),i.pb(31,49152,null,0,u.C,[i.h,i.k,i.x],{name:[0,"name"]},null),(n()(),i.qb(32,0,null,0,1,"span",[["style","margin-left: 20px;"]],null,null,null,null,null)),(n()(),i.Jb(33,null,[" "," "])),(n()(),i.qb(34,0,null,null,3,"ion-button",[["color","medium"],["fill","clear"],["size","large"],["style",""]],null,[[null,"click"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==n.component.ouvrirPublication()&&i),i}),e.X,e.e)),i.pb(35,49152,null,0,u.k,[i.h,i.k,i.x],{color:[0,"color"],fill:[1,"fill"],size:[2,"size"]},null),(n()(),i.qb(36,0,null,0,1,"ion-icon",[["name","share-social-outline"]],null,null,null,e.lb,e.s)),i.pb(37,49152,null,0,u.C,[i.h,i.k,i.x],{name:[0,"name"]},null),(n()(),i.fb(16777216,null,null,1,null,m)),i.pb(39,16384,null,0,o.k,[i.N,i.J],{ngIf:[0,"ngIf"]},null),(n()(),i.fb(16777216,null,null,1,null,d)),i.pb(41,16384,null,0,o.k,[i.N,i.J],{ngIf:[0,"ngIf"]},null)],(function(n,l){var t=l.component;n(l,2,0,"none"),n(l,10,0,t.publication.profil),n(l,15,0,t.auteur),n(l,19,0,!t.publication.le_type),n(l,21,0,t.publication.le_type),n(l,25,0,t.jaiLike),n(l,27,0,!t.jaiLike),n(l,29,0,"medium","clear","large"),n(l,31,0,"chatbox-ellipses-outline"),n(l,35,0,"medium","clear","large"),n(l,37,0,"share-social-outline"),n(l,39,0,t.commentaire&&t.montrerLeDernierCommentaire),n(l,41,0,t.commentaire&&t.montrerLeDernierCommentaire)}),(function(n,l){var t=l.component;n(l,5,0,t.publication.utilisateur?t.publication.utilisateur.photoURL:"../../../assets/img/user.png"),n(l,8,0,t.publication.utilisateur?t.publication.utilisateur.displayName:"Aucun utilisateur"),n(l,13,0,t.getLibelleDate(t.publication.date)),n(l,17,0,t.urlify(t.publication.texte)),n(l,33,0,t.publication.commentaires?t.publication.commentaires.length:0)}))}function v(n){return i.Lb(0,[i.Hb(671088640,1,{videoplayer:0}),(n()(),i.fb(16777216,null,null,1,null,g)),i.pb(2,16384,null,0,o.k,[i.N,i.J],{ngIf:[0,"ngIf"]},null)],(function(n,l){n(l,2,0,l.component.isShown)}),null)}},wzbf:function(n,l,t){"use strict";var i=t("iqUP"),e=function(){return function(n,l){this.id=n.uid+l.id,this.date=new Date,this.valide=!0,this.idpublication=l.id,this.idutilisateur=n.uid}}(),u=t("CcnG");t.d(l,"a",(function(){return o}));var o=function(){function n(){}return n.prototype.purifier=function(n){return JSON.parse(JSON.stringify(n))},n.prototype.savePublication=function(n){var l=this,t=i.firestore();return new Promise((function(i,e){t.collection("publications").doc(n.id).set(l.purifier(n)).then((function(){i(n)})).catch((function(n){e(n)}))}))},n.prototype.getPublication=function(n){var l=i.firestore();return new Promise((function(t,i){l.collection("publications").doc(n).get().then((function(n){var l=n.data();t(l)})).catch((function(n){i(n)}))}))},n.prototype.getPublications=function(){var n=i.firestore(),l=new Array;return new Promise((function(t,i){n.collection("publications").onSnapshot((function(n){n.docChanges().forEach((function(n){if("added"==n.type){var t=n.doc.data();l.push(t)}"modified"==n.type&&(t=n.doc.data(),l.push(t))})),t(l)}))}))},n.prototype.getPublicationsFromUser=function(n){var l=i.firestore(),t=new Array;return new Promise((function(i,e){l.collection("publications").where("utilisateur.uid","==",n.uid).get().then((function(n){n.forEach((function(n){var l=n.data();t.push(l)})),i(t)})).catch((function(n){e(n)}))}))},n.prototype.deletePublication=function(n){var l=i.firestore();return new Promise((function(t,i){l.collection("publications").doc(n).delete().then((function(n){t("resultats")})).catch((function(n){i(n)}))}))},n.prototype.like=function(n,l){var t=this,u=i.firestore(),o=new e(n,l);return new Promise((function(i,e){u.collection("likes").doc(o.id).set(t.purifier(o)).then((function(){l.likes?l.likes+=1:l.likes=1,l.likeurs?l.likeurs.push(n.uid):(l.likeurs=new Array,l.likeurs.push(n.uid)),t.savePublication(l).then((function(n){i(l)})).catch((function(n){e(n)}))})).catch((function(n){e(n)}))}))},n.prototype.unlike=function(n,l){var t=this,u=i.firestore(),o=new e(n,l);return new Promise((function(i,e){u.collection("likes").doc(o.id).set(t.purifier(o)).then((function(){l.likes?l.likes-=1:l.likes=0,l.likeurs?l.likeurs.push(n.uid):(l.likeurs=new Array,l.likeurs.push(n.uid)),t.savePublication(l).then((function(n){i(l)})).catch((function(n){e(n)}))})).catch((function(n){e(n)}))}))},n.prototype.saveCommentaire=function(n){var l=this,t=i.firestore();return new Promise((function(i,e){t.collection("commentaires").doc(n.id).set(l.purifier(n)).then((function(){i(n)})).catch((function(n){e(n)}))}))},n.prototype.getCommentaires=function(n){var l=i.firestore(),t=new Array;return new Promise((function(i,e){l.collection("commentaires").where("publication.id","==",n.id).get().then((function(n){n.forEach((function(n){var l=n.data();t.push(l)})),t.sort((function(n,l){return new Date(n.date).getTime()-new Date(l.date).getTime()?-1:1})),i(t)}))}))},n.prototype.getCommentairesofUtilisateur=function(n){var l=i.firestore(),t=new Array;return new Promise((function(i,e){l.collection("commentaires").where("utilisateur.uid","==",n.uid).get().then((function(n){n.forEach((function(n){var l=n.data();t.push(l)})),t.sort((function(n,l){return new Date(n.date).getTime()-new Date(l.date).getTime()?-1:1})),i(t)}))}))},n.prototype.getLikesofUtilisateur=function(n){var l=i.firestore(),t=new Array;return new Promise((function(i,e){l.collection("publications").where("likeurs","array-contains",n.uid).get().then((function(n){n.forEach((function(n){var l=n.data();t.push(l)})),t.sort((function(n,l){return new Date(n.date).getTime()-new Date(l.date).getTime()?-1:1})),i(t)}))}))},n.ngInjectableDef=u.Pb({factory:function(){return new n},token:n,providedIn:"root"}),n}()}}]);